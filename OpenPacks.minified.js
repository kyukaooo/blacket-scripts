let extra_delay=0,max_delay=Object.values(blacket.rarities).map((e=>e.wait)).reduce(((e,t)=>e>t?e:t))+extra_delay;const rarityOrder=Object.entries(blacket.rarities).sort(((e,t)=>e[1].exp-t[1].exp)).map((e=>e[0])),pSBC=(e,t,a,r)=>{let o,n,c,l,i,s,k,p=parseInt,b=Math.round,u="string"==typeof a;return"number"!=typeof e||e<-1||e>1||"string"!=typeof t||"r"!=t[0]&&"#"!=t[0]||a&&!u?null:(this.pSBCr||(this.pSBCr=e=>{let t=e.length,a={};if(t>9){if([o,n,c,u]=e=e.split(","),t=e.length,t<3||t>4)return null;a.r=p("a"==o[3]?o.slice(5):o.slice(4)),a.g=p(n),a.b=p(c),a.a=u?parseFloat(u):-1}else{if(8==t||6==t||t<4)return null;t<6&&(e="#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+(t>4?e[4]+e[4]:"")),e=p(e.slice(1),16),9==t||5==t?(a.r=e>>24&255,a.g=e>>16&255,a.b=e>>8&255,a.a=b((255&e)/.255)/1e3):(a.r=e>>16,a.g=e>>8&255,a.b=255&e,a.a=-1)}return a}),k=t.length>9,k=u?a.length>9||"c"==a&&!k:k,i=this.pSBCr(t),l=e<0,s=a&&"c"!=a?this.pSBCr(a):l?{r:0,g:0,b:0,a:-1}:{r:255,g:255,b:255,a:-1},l=1-(e=l?-1*e:e),i&&s?(r?(o=b(l*i.r+e*s.r),n=b(l*i.g+e*s.g),c=b(l*i.b+e*s.b)):(o=b((l*i.r**2+e*s.r**2)**.5),n=b((l*i.g**2+e*s.g**2)**.5),c=b((l*i.b**2+e*s.b**2)**.5)),u=i.a,s=s.a,i=u>=0||s>=0,u=i?u<0?s:s<0?u:u*l+s*e:0,k?"rgb"+(i?"a(":"(")+o+","+n+","+c+(i?","+b(1e3*u)/1e3:"")+")":"#"+(4294967296+16777216*o+65536*n+256*c+(i?b(255*u):0)).toString(16).slice(1,i?void 0:-2)):null)};let pack,amount,openPack=async e=>new Promise(((t,a)=>{blacket.requests.post("/worker3/open",{pack:e},(e=>{e.error&&a(),t(e.blook)}))})),main=async(e,t)=>{const a=[];for(;!(a.length>=t);)try{const r=await openPack(e);blacket.user.tokens-=blacket.packs[e].price;const o=blacket.rarities[blacket.blooks[r].rarity].wait+extra_delay,n=blacket.rarities[blacket.blooks[r].rarity].color;console.log(`%c ${r??"Invalid Blook"} %s`,`color:#fff;font-size:2vw;text-shadow:0 0 .5vw rgba(255,255,255,.4),-.15vw -.15vw 0 #fff;font-family:Titan One;background:-webkit-linear-gradient(45deg,${n},${pSBC(.5,n)});-webkit-background-clip:text;-moz-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent`,`%c(${a.length+1}/${t})`,"font-size:.5vw"),a.push(r),await new Promise(((e,t)=>setTimeout(e,o)))}catch(e){console.log(e),await new Promise(((e,t)=>setTimeout(e,max_delay)))}console.log("%c","font-size: 4em"),console.log(`%c${t} pack results below:`,"font-size: 4em");const r=a.reduce(((e,t)=>(e[t]=(e[t]||0)+1,e)),{});Object.keys(r).sort(((e,t)=>rarityOrder.indexOf(blacket.blooks[t].rarity)-rarityOrder.indexOf(blacket.blooks[e].rarity))).forEach((e=>{const t=r[e],a=blacket.rarities[blacket.blooks[e].rarity].color;console.log(`%c ${e} %sx`,`color:#fff;font-size:2vw;text-shadow:0 0 .5vw rgba(255,255,255,.4),-.15vw -.15vw 0 #fff;font-family:Titan One;background:-webkit-linear-gradient(45deg,${a},${pSBC(.5,a)});-webkit-background-clip:text;-moz-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent`,t)}))},packs=Object.keys(blacket.packs);do{if((pack&&!packs.includes(pack)||""===pack)&&!window.confirm("Invalid pack, would you like to try again?"))break;if(pack=window.prompt("Enter a pack (case-sensitive)"),null===pack)break}while(!pack||!packs.includes(pack));let max_packs=Math.floor(blacket.user.tokens/blacket.packs[pack].price);do{if(amount&&(amount<1||amount>max_packs)&&!window.confirm("Invalid amount, would you like to try again?"))break;if(amount=parseInt(window.prompt(`Enter a number of packs to open (Max: ${max_packs})`)),null===amount)break}while(!amount||amount<1||amount>max_packs);pack&&amount&&main(pack,amount);
